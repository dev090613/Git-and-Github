#### Overview of the push fetch and pull Git command

![image-20230801123716699](images/image-20230801123716699.png)

- Does remote repository update itself automatically after local repository change? <u>No you need to push changes</u>.
- What happens when remote repository updates? Does local repository update itself automatically? <u>No, you need to pull changes.</u>



---

#### About `fetch`



![image-20240610132526428](images/image-20240610132526428.png)

- `git fetch` command doesnâ€™t update your `local working directory`. 

cf> `pull`

![image-20240610132932893](images/image-20240610132932893.png)



---

#### What is origin

![image-20240610133217739](images/image-20240610133217739.png)

- default name of remote repository is `origin`.

![image-20240610133602344](images/image-20240610133602344.png)

- `git remote`: you are able to list all remote servers for your local git repositories.



By default after cloning, Git will not create corresponding local branches for all remote branches except default remote branch

- Question ğŸ™‹â€â™‚ï¸ : How you can get a list of all remote branches(including local)?? coming soon...
  - List all branches available locally and on remote server: `git branch -a`



---

#### List remote and local branches

<img src="images/image-20240610211804490.png" alt="image-20240610211804490" style="zoom:25%;" />

~~~bash
# all local and remote
git branch -a 
# * main
#   remotes/origin/HEAD -> origin/main
#   remotes/origin/feature-1
#   remotes/origin/main

# only remote branch
git branch -r 

# only local branch
git branch  
~~~



---

#### What is tracking branch

![image-20230801125647755](images/image-20230801125647755.png)

- Tracking branch is your local branch that is connected to specific remote branch.
  - `master`, `release`, `BR-2`
- By default, when you clone any remote repository, git create only one tracking branch with the same name as default branch in the remote repository.

~~~bash
git branch -vv 
# local branchì— ëŒ€í•œ ì¶”ê°€ì •ë³´ë¥¼ ì•Œ ìˆ˜ ìˆë‹¤.
# ì˜ˆë¥¼ ë“¤ë©´, í˜„ì¬ ë¸Œëœì¹˜ì™€ ì—°ê²°ëœ ì›ê²© ì¶”ì  ë¸Œëœì¹˜(tracking branch)
~~~

![image-20240610215315132](images/image-20240610215315132.png)

remote repository

![image-20240610215510046](images/image-20240610215510046.png)



---

#### Checkout remote branch



<img src="images/image-20240610215627806.png" alt="image-20240610215627806" style="zoom: 25%;" />

~~~bash
git branch -a

git checkout feature-1
~~~

`git branch -a`

![image-20240610215855173](images/image-20240610215855173.png)

Letâ€™s create another local tracking branch for remote feature(`feature-1`)





![image-20230801130737792](images/image-20230801130737792.png)

í˜„ ìƒíƒœ

![image-20230801130908595](images/image-20230801130908595.png)

~~~bash
git branch -d feature-1
# error: Cannot delete branch 'feature-1' checked out at '/Users/isntsoo/Desktop/github-repo-for-fun'
git checkout main

git branch
#   feature-1
# * main

git branch -d feature-1
~~~

![image-20230801131601013](images/image-20230801131601013.png)

- localì—ì„œ ì‚­ì œë˜ì—ˆë‹¤. ê·¸ë˜ë„ remoteì—ëŠ” ë‚¨ì•„ìˆë‹¤. `git remote -a`ë¡œ í™•ì¸

![image-20230801131817460](images/image-20230801131817460.png)

- ë‹¤ìŒ ë‹¨ê³„ ì§„í–‰ì„ ìœ„í•´ localì— ë‹¤ì‹œ remoteì˜ feature-1ì„ íŠ¸ë™í‚¹í•˜ëŠ” feature-1 branchë¥¼ ë§Œë“¤ì `git checkout feature-1`,  `git branch -vv`

![image-20230801132043048](images/image-20230801132043048.png)

#### Git remote show origin

- ë‹¤ìŒ commandëŠ” local, remote ì— ê´€í•œ Entire informationì„ ì–»ì„ ìˆ˜ ìˆë‹¤.

~~~bash
# git remote show <nameofServer>
git remote show origin
~~~

![image-20230801134616981](images/image-20230801134616981.png)

#### Git fetch in action

~~~bash
# webìœ¼ë¡œ temp branch ìƒì„±í•œ ë‹¤ìŒ,

git branch -r # ë¡œì»¬ì €ì¥ì†Œì— ìˆëŠ” ì›ê²© ë¸Œëœì¹˜ë“¤ì„ ë³´ì—¬ì£¼ë¯€ë¡œ,
# ì›ê²©ì €ì¥ì†Œì™€ ì•„ì§ ë™ê¸°í™” ë˜ì§€ ì•Šì•˜ìœ¼ë¯€ë¡œ temp branchê°€ ë‚˜íƒ€ë‚˜ì§€ ì•ŠìŒ

git fetch # temp branchë¥¼ remoteì—ì„œ localë¡œ ê°€ì ¸ì™”ë‹¤.
# ì›ê²© ì €ì¥ì†Œì˜ ìµœì‹  ì •ë³´ë¥¼ ë¡œì»¬ ì €ì¥ì†Œë¡œ ê°€ì ¸ì˜´.

git branch -r
~~~

![image-20230801140450788](images/image-20230801140450788.png)

![image-20230801140541028](images/image-20230801140541028.png)

~~~bash
# localì— tempì— ëŒ€í•œ Tracking branchë¥¼ ë§Œë“¤ì
git checkout temp

git brangh -vv

git remote show origin
~~~

![image-20230801140750981](images/image-20230801140750981.png)

~~~bash
# Web(ì›ê²©)ì—ì„œ temp branchë¥¼ ì œê±°í•œ ë‹¤ìŒ,

git remote show

git remote prune origin

git branch -vv

git checkout main

git branch -d temp
~~~

![image-20230801141013876](images/image-20230801141013876.png)

![image-20230801141348160](images/image-20230801141348160.png)

![image-20230801141422154](images/image-20230801141422154.png)

#### Git pull is 2-step precess

![image-20230801143625386](images/image-20230801143625386.png)



#### How to perform git pull

![image-20230801143802582](images/image-20230801143802582.png)

í˜„ ìƒí™©

  ![image-20230801144229116](images/image-20230801144229116.png)

- Your local branch is receiving branch

#### What is FETCH_HEAD

~~~bash
git fetch -v
git pull -v

git checkout main

git pull -v

cd .git
cat FETCH_HEAD


~~~

![image-20230801150400241](images/image-20230801150400241.png)

![image-20230801150452554](images/image-20230801150452554.png)

![image-20230801150537289](images/image-20230801150537289.png)

![image-20230801150746755](images/image-20230801150746755.png)

![image-20230801150911736](images/image-20230801150911736.png)

![image-20230801151037293](images/image-20230801151037293.png)

- After fetching it will update .git/FETCH_HEAD list and first branch in this list will be currently checked out branch
- Finally Git executes "git merge FETCH_HEAD" command that finds first branch in .git/FETC H_HEAD list without "not-for-merge" tag and merge it into local tracking currently checked out branch

![image-20230801151410809](images/image-20230801151410809.png)

![image-20230801151603564](images/image-20230801151603564.png)

![image-20230801152808342](images/image-20230801152808342.png)

#### Git pull with fast forward merge

![image-20230801160433985](images/image-20230801160433985.png)

![image-20230801160457581](images/image-20230801160457581.png)

~~~bash
# Webìœ¼ë¡œ ê°€ì„œ
# feature-1 branch ìœ„ì¹˜
# feature/another-file.txt ìƒì„±
# Just another file created in the feature-1 branch
# commit

# localë¡œ ê°€ì ¸ì˜¤ì
git checkout feature-1
git pull -v 
~~~

![image-20230801160018523](images/image-20230801160018523.png)

![image-20230801160336796](images/image-20230801160336796.png)



#### Fetch remote changes manually

~~~bash
git checkout feature-1

# another-file.txt ìˆ˜ì •
# This file was modiried locally ì¶”ê°€
# commit -m "Modified another-file.txt locally"

# Webìœ¼ë¡œ ê°€ì„œ
# feature/one-more-file.txt ìƒì„±
# This file was created in the remote repository ì¶”ê°€

git fetch -v

git ls-files -s # merge ì•ˆí–ˆìœ¼ë‹ˆ ì•„ì§ ìƒˆë¡œ ì¶”ê°€í–ˆë˜ íŒŒì¼ì€ ë“±ì¥ ì•ˆí•¨ 
# .git/objectsì—ëŠ” ìˆë‹¤.


~~~

![image-20230801162520018](images/image-20230801162520018.png)

![image-20230801161939386](images/image-20230801161939386.png)

- .git/objects/ ì— blobì€ ìƒì„±ì´ ëœ ìƒíƒœ

![image-20230801162750147](images/image-20230801162750147.png)

ë‹¤ë§Œ ì•„ì§ working directoryì™€ staging areaì— ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ìƒíƒœ

![image-20230801163212259](images/image-20230801163212259.png)

ã„´ ì´ë ‡ê²Œ git repoì—ëŠ” ìƒì„±ì´ ë˜ì–´ ìˆìŒì„ í™•ì¸í–ˆë‹¤.



![image-20230801163328858](images/image-20230801163328858.png)



#### Merge FETCH_HEAD manually

~~~bash
cat .git/FETCH_HEAD

git log


~~~

![image-20230801164355054](images/image-20230801164355054.png)

![image-20230801164456298](images/image-20230801164456298.png)



#### Resolving conflicts during Git pull

![image-20230802144945488](images/image-20230802144945488.png)



~~~bash
# remote repoì—ì„œ ì‘ì—…ì„ í•´ë³´ì
# feature-1 branchì—ì„œ readme.md ìˆ˜ì •
# one more edit at Github ì¶”ê°€
# commit

# ì´ë²ˆì—” local repoì—ì„œ ì‘ì—…ì„ í•œë‹¤.
# terminal, feature-1 branch
# vim readme.md
# This file was modified locally ì¶”ê°€
# commit -a -m "Modified REAME.md file locally"

git pull -v # Confliction

git ls-files -s # 3ê°œ versionì˜ file, í•˜ë‚˜ì”© í™•ì¸í•´ë³´ì
# git repoì— blobsëŠ” ìƒì„±ëì§€ë§Œ git ls-files -s ì—ëŠ” í•˜ë‚˜ì˜ readme.mdê°€ ë‚˜íƒ€ë‚œë‹¤.
# ë²„ì „ì—… ëœ ê²ƒ ê°™ë‹¤.

vim README.md # ìƒˆë¡œìš´ ë²„ì „ìœ¼ë¡œ ìˆ˜ì •
# This line was modified manually during conflicts resolution

git commit -a 
~~~

![image-20230802151711424](images/image-20230802151711424.png)

![image-20230802152945683](images/image-20230802152945683.png)

git pullì´ ì•„ë‹ˆë¼ git merge FETCH_HEAD í•˜ë‹ˆê¹Œ ì„¸ ë²„ì „ì˜ README.mdê°€ ë‚˜íƒ€ë‚¬ë‹¤.

git pullì€ blobë§Œ ìƒê²¼ì—ˆëŠ”ë°.. ì•„ë§ˆ ë­”ê°€ git pullì— ì—…ë°ì´íŠ¸ê°€ ìˆëŠ”ê²Œ ì•„ë‹ê¹Œ

ì•„ë¬´íŠ¼, ì´ë²ˆ ê¸°íšŒì— git pullì´ git fetchì™€ git merge FETCH_HEAD ë¼ëŠ” ê²ƒì„ í™•ì‹¤íˆ ì´í•´í–ˆë‹¤.

#### Pushing to remote repository

~~~bash
git remote -v

# ì´ì œ local repoì˜ ë³€í™”ë¥¼ remote repoë¡œ ì˜¬ë ¤ë³¸ë‹¤. git push

git push -v # ë‹¤ë¥¸ author, emailë¡œ push ê°€ëŠ¥í•˜ë‹¤.

cat .git/config
~~~

![image-20230802161225825](images/image-20230802161225825.png)

![image-20230802161347952](images/image-20230802161347952.png)

í•´ê²°! ìµœì´ˆ remote repoë¥¼ clone í•  ë•Œ https ë°©ì‹ìœ¼ë¡œ í–ˆì—ˆëŠ”ë°, GithubëŠ” ssh ë°©ì‹ì˜ ì½ê³  ì“°ê¸°ë§Œì„ ì§€ì›í•˜ëŠ” ê²ƒ ê°™ë‹¤.

ì´ë¥¼ ìˆ˜ì •í•´ì¤¬ë‹¤.

![image-20230802163322576](images/image-20230802163322576.png)

`git log` : remote repo(origin) ì˜ í¬ì¸í„°ê°€ ì´ë™í–ˆë‹¤.

![image-20230802163413636](images/image-20230802163413636.png)

#### Commit under another author

~~~bash
# readme.md ìˆ˜ì •
# New line was added locally
git commit -m "Another local change"

git push -v

# Local repository user.name and user.email settings override global Git settings
# ì¦‰, local í™˜ê²½ì˜ user.name, user.emailì„ ìˆ˜ì •í•´ì„œ pushí•˜ë©´ ëœë‹¤.
~~~



#### Remote and local branches are in sync

ì£¼ê¸°ì ìœ¼ë¡œ `git fetch`ë¥¼ í•´ì„œ remote repoì™€ ì‹±í¬ë¥¼ ë§ì¶°ì£¼ì

GUIë¥¼ ì“°ë©´ ê°„ë‹¨í•˜ë‹¤

`git pull -v`

`git push -v`

í•˜ì˜€ì„ ë•Œ up to date ì´ë©´ ëœë‹¤.

#### Create remote branch based on local

~~~bash
git checkout -b feature-2

git branch -r # remote repoì—ëŠ” ì—†ëŠ” ê²ƒ í™•ì¸

git branch -vv # remote repoì—ëŠ” ì—†ëŠ” ê²ƒ í™•ì¸

# feature/another-file.txt ìˆ˜ì •
# This line was added in teature-2 branch ì¶”ê°€
# ì²« ì¤„ : This line was replace in feature-2 branch êµì²´
# commit -m "Another-file.txt was modified in feature-2 branch"

git push -v # Error! ### ê°€ ë‚˜ì˜¤ì§€ ì•Šì•˜ë‹¤.
# ê¹ƒí—ˆë¸Œê°€ ì—…ë°ì´íŠ¸ ëœ ê²ƒ ê°™ë‹¤.

# git push --set-upstream origin feature-2
# ì¶•ì•½í•´ì„œ ì´ë ‡ê²Œ ê°€ëŠ¥
git push -v -u origin feature-2

git branch -vv

# ë‹¤ì‹œ ìˆ˜ì •
# Another modification in the feature-2 branch

git push -v # No need to specify name of the server and
# name of the remote branch because local "feature-2" branch is
# already tracking branch and know its remote branch
~~~

![image-20230802170417259](images/image-20230802170417259.png)

ì‹¤ì œë¡œ í•´ë³´ë‹ˆ git push -v ë§Œìœ¼ë¡œ remote repoì— tracking branchê°€ ì—†ìŒì—ë„ branchê°€ ìƒì„±ë˜ë©´ì„œ

pushê°€ ê·¸ëƒ¥ ëë‹¤.



#### Update tracking statuses of the branches

~~~bash
# remote
# temp branch ìƒì„± in feature-2 branch

# local
git branch # temp ì—†ìŒ
git fetch
git branch # temp ì—¬ì „íˆ ì—†ìŒ
git branch -vv # temp ì—¬ì „íˆ ì—†ìŒ, -aë¡œëŠ” í™•ì¸ ê°€ëŠ¥
git branch -a

git checkout temp
git branch -vv # ì´ì œ tempê°€ localì—ë„ ìƒì„±ëìŒ

# remote
# delete temp
git fetch # no temp branch
git branch -vv # ì—¬ì „íˆ ìˆìŒ...
# ì™œ ë°˜ì˜ì´ ì•ˆë ê¹Œ? ë°˜ì˜ë˜ê²Œ í•˜ë ¤ë©´?
git remote update origin
git remote update origin --prune # ì´ê²ƒ.
git branch -vv

git checkout main
git branch -d temp # ì‚­ì œ ë¶ˆê°€
git branch -D temp
~~~

![image-20230802185749811](images/image-20230802185749811.png)

#### Remove remote branch using local

~~~bash
# local
git checkout -b temp

git push -u -origin temp
~~~

![image-20230802190102742](images/image-20230802190102742.png)

~~~bash
# local í™˜ê²½ì—ì„œ remote repoì˜ temp branchë¥¼ ì§€ì›Œë³¸ë‹¤.
git push origin -d temp
~~~

![image-20230802190333952](images/image-20230802190333952.png)   

~~~bash
# localì—ì„œë„ ì§€ìš°ì
git checkout main
git branch -d temp
~~~

#### Git show-ref

`git show-ref` : íŠ¹ì • branchì˜ localê³¼ remoteì˜ referenceë¥¼ ë¹ ë¥´ê²Œ ë¹„êµí•˜ê³  ì‹¶ë‹¤ë©´.

~~~bash
git show-ref

ls .git/refs/heads

ls .git/refs/remotes/origin
~~~

![image-20230802190741337](images/image-20230802190741337.png)

~~~bash
git show-ref main
git show-ref feature-2
# ê°™ì€ hashë¥¼ ê°€ë¦¬í‚¤ê³  ìˆëŠ”ì§€ ë“±ì„ ë³¼ ìˆ˜ ìˆìŒ
~~~

~~~bash
git  checkout feature-2

# readme.md ìˆ˜ì •
# Edit in the feature-2 branch
# commit -m "Changes in feature-2"

git show-ref feature-2
git log
~~~

![image-20230802191636765](images/image-20230802191636765.png)

`git push-v`

![image-20230802191736661](images/image-20230802191736661.png)